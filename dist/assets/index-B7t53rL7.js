(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))g(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const v of r.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&g(v)}).observe(document,{childList:!0,subtree:!0});function y(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function g(o){if(o.ep)return;o.ep=!0;const r=y(o);fetch(o.href,r)}})();document.addEventListener("DOMContentLoaded",()=>{const u=document.getElementById("navToggle"),a=document.getElementById("navMenu"),y=document.querySelectorAll(".nav__link");u&&a&&(u.addEventListener("click",()=>{u.classList.toggle("active"),a.classList.toggle("active"),document.body.style.overflow=a.classList.contains("active")?"hidden":""}),y.forEach(t=>{t.addEventListener("click",()=>{u.classList.remove("active"),a.classList.remove("active"),document.body.style.overflow=""})}),document.addEventListener("click",t=>{a.classList.contains("active")&&!a.contains(t.target)&&!u.contains(t.target)&&(u.classList.remove("active"),a.classList.remove("active"),document.body.style.overflow="")}));const g=document.getElementById("header"),o=()=>{window.scrollY>50?g.classList.add("scrolled"):g.classList.remove("scrolled")};window.addEventListener("scroll",o,{passive:!0}),o();const r=document.getElementById("backToTop");r&&(window.addEventListener("scroll",()=>{window.scrollY>500?r.classList.add("visible"):r.classList.remove("visible")},{passive:!0}),r.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})),document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",e=>{const n=document.querySelector(t.getAttribute("href"));n&&(e.preventDefault(),n.scrollIntoView({behavior:"smooth"}))})});const v={threshold:.1,rootMargin:"0px 0px -50px 0px"},b=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),b.unobserve(e.target))})},v);document.querySelectorAll(".animate-fade-up").forEach(t=>{b.observe(t)});const E=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting&&(e.target.querySelectorAll(".stat__number[data-count]").forEach(l=>{x(l)}),E.unobserve(e.target))})},{threshold:.3}),L=document.querySelector(".stats");L&&E.observe(L);function x(t){const e=parseInt(t.getAttribute("data-count")),n=2e3,l=performance.now();function d(p){const c=p-l,s=Math.min(c/n,1),i=1-Math.pow(1-s,3),h=Math.round(e*i);t.textContent=h.toLocaleString(),s<1?requestAnimationFrame(d):t.textContent=e.toLocaleString()}requestAnimationFrame(d)}const I=document.querySelectorAll(".faq-item");I.forEach(t=>{const e=t.querySelector(".faq-item__question"),n=t.querySelector(".faq-item__answer");e.addEventListener("click",()=>{const l=t.classList.contains("active");I.forEach(d=>{d!==t&&(d.classList.remove("active"),d.querySelector(".faq-item__question").setAttribute("aria-expanded","false"),d.querySelector(".faq-item__answer").style.maxHeight="0")}),t.classList.toggle("active"),e.setAttribute("aria-expanded",!l),l?n.style.maxHeight="0":n.style.maxHeight=n.scrollHeight+"px"})});const m=document.getElementById("bookingForm"),q=document.getElementById("formSuccess");if(m){const t=document.getElementById("date");if(t){const e=new Date().toISOString().split("T")[0];t.setAttribute("min",e)}m.addEventListener("submit",e=>{e.preventDefault(),m.querySelectorAll(".form-group").forEach(c=>{c.classList.remove("error")});let n=!0;[{id:"fullName",message:"Please enter your full name"},{id:"phone",message:"Please enter your phone number"},{id:"email",message:"Please enter a valid email address"},{id:"service",message:"Please select a service"},{id:"date",message:"Please select a preferred date"}].forEach(c=>{const s=document.getElementById(c.id),i=s.closest(".form-group"),h=i.querySelector(".form-error");(!s.value||s.value.trim()==="")&&(i.classList.add("error"),h&&(h.textContent=c.message),n=!1)});const d=document.getElementById("email");if(d.value&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.value)){const s=d.closest(".form-group"),i=s.querySelector(".form-error");s.classList.add("error"),i&&(i.textContent="Please enter a valid email address"),n=!1}const p=document.getElementById("phone");if(p.value&&p.value.replace(/[\s\-\(\)\.]/g,"").length<10){const s=p.closest(".form-group"),i=s.querySelector(".form-error");s.classList.add("error"),i&&(i.textContent="Please enter a valid phone number"),n=!1}if(n){const c={name:document.getElementById("fullName").value,email:document.getElementById("email").value,phone:document.getElementById("phone").value,service:document.getElementById("service").value,vehicleType:document.getElementById("vehicleType").value,date:document.getElementById("date").value,time:document.getElementById("time").value,message:document.getElementById("message").value},s=m.querySelector('button[type="submit"]'),i=s.textContent;s.disabled=!0,s.textContent="Sending...",fetch("https://ooxixdtwsehcspmkztoy.supabase.co/functions/v1/send-booking-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(f=>f.json()).then(f=>{if(f.success||f.message)m.style.display="none",q.style.display="block",q.scrollIntoView({behavior:"smooth",block:"center"});else throw new Error(f.error||"Failed to send booking")}).catch(f=>{console.error("Booking error:",f),alert("Sorry, there was an error sending your booking. Please call us directly at (555) 123-4567."),s.disabled=!1,s.textContent=i})}else{const c=m.querySelector(".form-group.error");c&&c.scrollIntoView({behavior:"smooth",block:"center"})}}),m.querySelectorAll("input, select, textarea").forEach(e=>{e.addEventListener("input",()=>{e.closest(".form-group").classList.remove("error")}),e.addEventListener("change",()=>{e.closest(".form-group").classList.remove("error")})})}const B=document.querySelectorAll("section[id]"),A=new IntersectionObserver(t=>{t.forEach(e=>{if(e.isIntersecting){const n=e.target.getAttribute("id");y.forEach(l=>{l.classList.remove("active"),l.getAttribute("href")===`#${n}`&&l.classList.add("active")})}})},{threshold:.3,rootMargin:"-80px 0px -50% 0px"});B.forEach(t=>{A.observe(t)});const S=document.getElementById("currentYear");S&&(S.textContent=new Date().getFullYear());const w=document.getElementById("phone");w&&w.addEventListener("input",t=>{let e=t.target.value.replace(/\D/g,"");e.length>10&&(e=e.slice(0,10)),e.length>=7?e=`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`:e.length>=4?e=`(${e.slice(0,3)}) ${e.slice(3)}`:e.length>=1&&(e=`(${e}`),t.target.value=e})});
